# Comprehensive Turn-by-Turn Performance: All Strategies and Metrics

This table provides a comprehensive view of all retrieval strategies and metrics across conversation turns. It looks at the 777 tasks that are Answerable or Partial only.

## Strategies

- **Last Turn**: Uses only the current question, ignoring conversation history
- **Query Rewrite**: Human experts rewrite queries to be standalone, incorporating necessary context
- **Questions**: Concatenates all questions from the conversation into a single query
- **MMR Cluster**: Extract sentences from history, cluster them, select diverse representatives via MMR, then rewrite query using LLM (k=10, Î»=0.7)

## All Turns

| Strategy      | R@5    | R@10   | NDCG@5 | NDCG@10 | Total Tasks |
| ------------- | ------ | ------ | ------ | ------- | ----------- |
| Last Turn     | 0.3267 | 0.4277 | 0.3013 | 0.3445  | 777         |
| Query Rewrite | 0.3813 | 0.4980 | 0.3539 | 0.4038  | 777         |
| Questions     | 0.2115 | 0.2829 | 0.1814 | 0.2116  | 777         |
| MMR Cluster   | 0.3582 | 0.4650 | 0.3269 | 0.3721  | 777         |

## By Turns

| Turn   | Count   | Strategy        | R@5      | R@10     | NDCG@5   | NDCG@10   | Winner @NDCG@5    |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------- |
| 1      | 102     | Last Turn       | 0.5467   | 0.6513   | 0.4943   | 0.5369    | NA                |
|        |         | Query Rewrite   | 0.5467   | 0.6513   | 0.4943   | 0.5369    |                   |
|        |         | Questions       | 0.5467   | 0.6513   | 0.4943   | 0.5369    |                   |
|        |         | MMR Cluster     | 0.5467   | 0.6513   | 0.4943   | 0.5369    |                   |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------  |
| 2      | 106     | Last Turn       | 0.3404   | 0.4392   | 0.3254   | 0.3676    | -19.1%            |
|        |         | Query Rewrite   | 0.4293   | 0.5434   | 0.4021   | 0.4511    | **Query Rewrite** |
|        |         | Questions       | 0.3797   | 0.5063   | 0.3483   | 0.4013    | -13.4%            |
|        |         | MMR Cluster     | 0.3796   | 0.4867   | 0.3697   | 0.4153    | -8.1%             |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------  |
| 3      | 103     | Last Turn       | 0.2339   | 0.3412   | 0.2168   | 0.2625    | -34.1%            |
|        |         | Query Rewrite   | 0.3484   | 0.4907   | 0.3291   | 0.3912    | **Query Rewrite** |
|        |         | Questions       | 0.2225   | 0.3071   | 0.1889   | 0.2260    | -42.6%            |
|        |         | MMR Cluster     | 0.3089   | 0.4361   | 0.2832   | 0.3361    | -13.9%            |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------  |
| 4      | 99      | Last Turn       | 0.2854   | 0.4060   | 0.2509   | 0.3022    | -21.7%            |
|        |         | Query Rewrite   | 0.3647   | 0.4701   | 0.3204   | 0.3662    | **Query Rewrite** |
|        |         | Questions       | 0.1750   | 0.2304   | 0.1325   | 0.1580    | -58.6%            |
|        |         | MMR Cluster     | 0.3364   | 0.4336   | 0.2921   | 0.3336    | -8.8%             |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------  |
| 5      | 96      | Last Turn       | 0.3024   | 0.3846   | 0.2836   | 0.3187    | -8.8%             |
|        |         | Query Rewrite   | 0.3281   | 0.4442   | 0.3109   | 0.3598    | **Query Rewrite** |
|        |         | Questions       | 0.1111   | 0.1450   | 0.0737   | 0.0893    | -76.3%            |
|        |         | MMR Cluster     | 0.3254   | 0.4175   | 0.2997   | 0.3397    | -3.6%             |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------  |
| 6      | 87      | Last Turn       | 0.2979   | 0.4148   | 0.2604   | 0.3126    | -18.9%            |
|        |         | Query Rewrite   | 0.3427   | 0.4736   | 0.3212   | 0.3778    | **Query Rewrite** |
|        |         | Questions       | 0.0644   | 0.1295   | 0.0541   | 0.0800    | -83.2%            |
|        |         | MMR Cluster     | 0.3439   | 0.4780   | 0.2971   | 0.3557    | -7.5%             |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------  |
| 7      | 80      | Last Turn       | 0.2625   | 0.3571   | 0.2559   | 0.2958    | -14.7%            |
|        |         | Query Rewrite   | 0.3067   | 0.4194   | 0.3000   | 0.3508    | **Query Rewrite** |
|        |         | Questions       | 0.0600   | 0.1056   | 0.0563   | 0.0751    | -81.2%            |
|        |         | MMR Cluster     | 0.3016   | 0.3926   | 0.2844   | 0.3232    | -5.2%             |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------  |
| 8      | 65      | Last Turn       | 0.3085   | 0.4015   | 0.2869   | 0.3302    | -2.8%             |
|        |         | Query Rewrite   | 0.3108   | 0.4085   | 0.2952   | 0.3396    | **Query Rewrite** |
|        |         | Questions       | 0.0897   | 0.1487   | 0.0602   | 0.0836    | -79.6%            |
|        |         | MMR Cluster     | 0.2615   | 0.3636   | 0.2441   | 0.2893    | -17.3%            |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------  |
| 9      | 32      | Last Turn       | 0.2516   | 0.3245   | 0.2316   | 0.2591    | -25.5%            |
|        |         | Query Rewrite   | 0.3602   | 0.5157   | 0.3109   | 0.3646    | **Query Rewrite** |
|        |         | Questions       | 0.0104   | 0.0208   | 0.0073   | 0.0117    | -97.7%            |
|        |         | MMR Cluster     | 0.2959   | 0.3907   | 0.2394   | 0.2734    | -23.0%            |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------  |
| 10     | 5       | Last Turn       | 0.7667   | 0.8333   | 0.7555   | 0.7889    | -3.5%             |
|        |         | Query Rewrite   | 0.7333   | 0.7333   | 0.7826   | 0.7826    | **Query Rewrite** |
|        |         | Questions       | 0.1667   | 0.2667   | 0.1205   | 0.1718    | -84.6%            |
|        |         | MMR Cluster     | 0.7333   | 0.9000   | 0.7148   | 0.7837    | -8.7%             |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------  |
| 11     | 1       | Last Turn       | 0.7500   | 0.7500   | 0.8319   | 0.8319    | NA                |
|        |         | Query Rewrite   | 0.7500   | 0.7500   | 0.8319   | 0.8319    |                   |
|        |         | Questions       | 0.0000   | 0.0000   | 0.0000   | 0.0000    |                   |
|        |         | MMR Cluster     | 0.7500   | 0.7500   | 0.8319   | 0.8319    |                   |
| ------ | ------- | --------------- | -------- | -------- | -------- | --------- | ----------------  |
| 12     | 1       | Last Turn       | 1.0000   | 1.0000   | 1.0000   | 1.0000    | NA                |
|        |         | Query Rewrite   | 1.0000   | 1.0000   | 0.6309   | 0.6309    |                   |
|        |         | Questions       | 0.0000   | 0.0000   | 0.0000   | 0.0000    |                   |
|        |         | MMR Cluster     | 1.0000   | 1.0000   | 1.0000   | 1.0000    |                   |
