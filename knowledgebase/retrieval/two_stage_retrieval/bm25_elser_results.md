# Two-Stage BM25 + ELSER: Comprehensive Results

## Method Overview

Two-stage retrieval pipeline:

1. **Stage 1**: BM25 lexical retrieval (local, PyTerrier) retrieves top-k candidates
2. **Stage 2**: ELSER neural reranking (Elasticsearch Cloud) reranks to top 10

### Configuration

| Parameter           | Value                              |
| :------------------ | :--------------------------------- |
| BM25 Implementation | PyTerrier                          |
| ELSER Model         | `.elser-2-elastic`                 |
| Final Top-k         | 10                                 |
| Query Types         | Standard Rewrite, Targeted Rewrite |

---

## Comprehensive Results

| Domain     | Method                      | nDCG@1    | nDCG@3    | nDCG@5    | nDCG@10      | R@1       | R@3       | R@5       | R@10      |
| :--------- | :-------------------------- | :-------- | :-------- | :-------- | :----------- | :-------- | :-------- | :-------- | :-------- |
| **ClapNQ** | BM25@500+ELSER (std)        | 0.519     | 0.467     | 0.507     | 0.563        | 0.210     | 0.422     | 0.542     | 0.669     |
|            | BM25@500+ELSER (targeted)   | 0.548     | 0.501     | 0.545     | 0.603        | 0.223     | 0.459     | 0.587     | 0.721     |
|            | Baseline ELSER (std)        | 0.524     | 0.470     | 0.514     | 0.578        | 0.209     | 0.424     | 0.552     | 0.701     |
|            | Baseline ELSER (targeted)   | **0.548** | **0.502** | **0.550** | **0.611**    | **0.222** | **0.459** | **0.598** | **0.737** |
|            | Baseline BGE (std)          | 0.471     | 0.413     | 0.438     | 0.498        | 0.174     | 0.376     | 0.462     | 0.606     |
|            | Baseline BGE (targeted)     | 0.505     | 0.432     | 0.466     | 0.529        | 0.193     | 0.387     | 0.491     | 0.643     |
|            | Baseline BM25 (std)         | 0.245     | 0.218     | 0.245     | 0.294        | 0.089     | 0.194     | 0.270     | 0.389     |
|            | Baseline BM25 (targeted)    | 0.255     | 0.242     | 0.268     | 0.321        | 0.095     | 0.223     | 0.296     | 0.427     |
|            |                             |           |           |           |              |           |           |           |           |
| **Cloud**  | BM25@500+ELSER (std)        | **0.383** | **0.350** | 0.376     | 0.424        | 0.177     | 0.333     | 0.401     | 0.509     |
|            | BM25@500+ELSER (targeted)   | 0.351     | 0.324     | 0.366     | 0.402        | 0.145     | 0.312     | 0.411     | 0.495     |
|            | Baseline ELSER (std)        | 0.378     | 0.365     | **0.394** | **0.438**    | **0.179** | **0.353** | **0.430** | **0.528** |
|            | Baseline ELSER (targeted)   | 0.367     | 0.348     | 0.389     | 0.425        | 0.157     | 0.337     | 0.436     | 0.521     |
|            | Baseline BGE (std)          | 0.293     | 0.276     | 0.304     | 0.342        | 0.148     | 0.271     | 0.338     | 0.423     |
|            | Baseline BGE (targeted)     | 0.340     | 0.311     | 0.335     | 0.381        | 0.161     | 0.299     | 0.358     | 0.467     |
|            | Baseline BM25 (std)         | 0.186     | 0.177     | 0.194     | 0.233        | 0.096     | 0.169     | 0.217     | 0.314     |
|            | Baseline BM25 (targeted)    | 0.218     | 0.216     | 0.236     | 0.265        | 0.111     | 0.211     | 0.262     | 0.333     |
|            |                             |           |           |           |              |           |           |           |           |
| **FiQA**   | BM25@500+ELSER (std)        | 0.383     | 0.329     | 0.353     | 0.403        | 0.160     | 0.289     | 0.365     | 0.479     |
|            | BM25@500+ELSER (targeted)   | 0.394     | 0.357     | 0.379     | 0.429        | 0.161     | 0.324     | 0.398     | 0.512     |
|            | Baseline ELSER (std)        | 0.389     | 0.344     | 0.378     | 0.436        | 0.163     | 0.310     | 0.402     | 0.536     |
|            | Baseline ELSER (targeted)   | **0.389** | **0.359** | **0.385** | **0.446**    | 0.159     | **0.331** | **0.412** | **0.554** |
|            | Baseline BGE (std)          | 0.311     | 0.274     | 0.294     | 0.341        | 0.130     | 0.249     | 0.308     | 0.418     |
|            | Baseline BGE (targeted)     | 0.283     | 0.257     | 0.290     | 0.335        | 0.114     | 0.233     | 0.315     | 0.418     |
|            | Baseline BM25 (std)         | 0.128     | 0.120     | 0.146     | 0.174        | 0.053     | 0.115     | 0.174     | 0.242     |
|            | Baseline BM25 (targeted)    | 0.133     | 0.122     | 0.144     | 0.173        | 0.051     | 0.118     | 0.165     | 0.233     |
|            |                             |           |           |           |              |           |           |           |           |
| **Govt**   | BM25@500+ELSER (std)        | 0.413     | 0.407     | 0.446     | 0.505        | 0.192     | 0.396     | 0.494     | 0.628     |
|            | BM25@500+ELSER (targeted)   | 0.463     | 0.443     | 0.483     | 0.536        | 0.210     | 0.424     | 0.525     | 0.651     |
|            | Baseline ELSER (std)        | 0.413     | 0.407     | 0.454     | 0.517        | 0.194     | 0.392     | 0.508     | 0.651     |
|            | Baseline ELSER (targeted)   | **0.458** | **0.440** | **0.487** | **0.541**    | **0.208** | **0.418** | **0.534** | **0.661** |
|            | Baseline BGE (std)          | 0.343     | 0.329     | 0.368     | 0.420        | 0.157     | 0.313     | 0.404     | 0.528     |
|            | Baseline BGE (targeted)     | 0.388     | 0.389     | 0.413     | 0.455        | 0.175     | 0.377     | 0.449     | 0.546     |
|            | Baseline BM25 (std)         | 0.274     | 0.275     | 0.295     | 0.342        | 0.120     | 0.270     | 0.328     | 0.436     |
|            | Baseline BM25 (targeted)    | 0.279     | 0.276     | 0.326     | 0.362        | 0.122     | 0.268     | 0.381     | 0.466     |
