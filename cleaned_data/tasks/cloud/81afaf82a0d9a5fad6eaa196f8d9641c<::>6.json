{
  "task_id": "81afaf82a0d9a5fad6eaa196f8d9641c<::>6",
  "conversation_id": "42",
  "turn_id": 6,
  "domain": "cloud",
  "input": "What could happen if I force a deletion on a key?",
  "gold_answer": "If you force a deletion on a key won't succeed if the key is protecting a registered IBM Cloud resource that's non-erasable due to a retention policy, which is a Write Once Read Many (WORM) policy set on the your IBM Cloud resource. You can verify whether a key is associated with a non-erasable resource by checking the 'preventKeyDeletion\" field in the registration details for the key. Then, you must contact an account owner to remove the retention policy on each registered IBM Cloud resource that is associated with the key before you can delete the key. However, You must use the force option to delete a root key that is registered with another cloud resource.\nRegistrations are associations between root keys and other cloud resources, such as Cloud Object Storage (COS) buckets or Cloud Databases deployments.",
  "enrichments": {
    "Question Type": [
      "Explanation",
      "Summarization"
    ],
    "Multi-Turn": [
      "Follow-up"
    ],
    "Answerability": [
      "ANSWERABLE"
    ]
  },
  "retrieved_contexts": [
    {
      "document_id": "ibmcld_09061-1334-3188",
      "text": "\nWhen the first user authorizes a key for deletion, it remains in the [Active state](https://cloud.ibm.com/docs/key-protect?topic=key-protect-key-states) for seven days, during which all key operations are allowed on the key. To complete the deletion, another user with a Manager role can use the Key Protect GUI or API to delete the key at any point during those seven days, at which time the key will be moved to the Destroyed state. Note that because it is impossible to purge an active key, another user must delete the key before it can purged.\n* The key and its associated data will be inaccessible 90 days after being deleted. When you delete a key, it is \"soft deleted\", meaning that the key and its associated data will be restorable up to 30 days after deletion. You are able to still retrieve associated data such as key metadata, registrations, and policies for up to 90 days. After 90 days, the key becomes eligible to be automatically [purged](https://cloud.ibm.com/docs/key-protect?topic=key-protect-delete-dual-auth-keysdelete-dual-auth-keys-key-purge), or hard deleted, and its associated data will be permanently removed from the Key Protect service.\n\n\n\n\n\n\n\n Authorize deletion for a key in the console \n\n[After you enable dual authorization for an instance or key](https://cloud.ibm.com/docs/key-protect?topic=key-protect-manage-dual-auth), you can provide the first authorization to delete a key by using the Key Protect IBM Cloud console.\n\n\n\n1. [Log in to the IBM Cloud console](https://cloud.ibm.com/login/).\n2. Go to Menu > Resource List to view a list of your resources.\n3. From your IBM Cloud resource list, select your provisioned instance of Key Protect.\n4. On the application details page, use the Keys table to browse the keys in your service.\n5. Click the \u22ef icon to open a list of options for the key that you want to delete.",
      "url": "https://cloud.ibm.com/docs/key-protect?topic=key-protect-delete-dual-auth-keys",
      "score": 49.493065,
      "feedback": {
        "relevant": {
          "868c6e58-57c1-48ee-8c67-832dbedcac18": {
            "value": "no",
            "timestamp": 1723462559
          }
        }
      },
      "query": {
        "bool": {
          "must": {
            "text_expansion": {
              "ml.tokens": {
                "model_id": ".elser_model_1",
                "model_text": "|user|: How can I delete a key?\n|assistant|: To delete a key using IBM Key Protect, you can follow these steps:\n1. Log in to the IBM Cloud console.\n2. Go to Menu > Resource List to view a list of your resources.\n3. From your IBM Cloud resource list, select your provisioned instance of Key Protect.\n4. On the application details page, use the Keys table to browse the keys in your service.\n5. Click the \u22ef icon to open a list of options for the key that you want to delete.\nPlease note that when you delete a key, it is \"soft deleted\", meaning that the key and its associated data will be restorable up to 30 days after deletion. After 90 days, the key becomes eligible to be automatically purged, or hard deleted, and its associated data will be permanently removed from the Key Protect service.\nAlso, keep in mind that deleting a key will make any data encrypted by the key inaccessible. If the key is restored within the 30-day time frame, this can be reversed. However, after 30 days, key metadata, registrations, and policies are available for up to 90 days, at which point the key becomes eligible to be purged. Once a key is no longer restorable and has been purged, its associated data can no longer be accessed.\n|user|: what happen when the first user authorizes a key for deletion?\n|assistant|: When the first user authorizes a key for deletion, it remains in the Active state for seven days. During this time, all key operations are allowed on the key. To complete the deletion, another user with a Manager role can use the Key Protect GUI or API to delete the key at any point during those seven days. Once the key is deleted, it will be moved to the Destroyed state. However, because it is impossible to purge an active key, another user must delete the key before it can be purged.\nThe key and its associated data will be inaccessible 90 days after being deleted. When you delete a key, it is \"soft deleted\", meaning that the key and its associated data will be restorable up to 30 days after deletion. You are able to still retrieve associated data such as key metadata, registrations, and policies for up to 90 days. After 90 days, the key becomes eligible to be automatically purged, or hard deleted, and its associated data will be permanently removed from the Key Protect service.\n|user|: What could happen if no action is taken by the second user and the 7-day period experies?\n|assistant|: If no action is taken by the second user and the 7-day period expires, the key will remain in the Active state and will not be deleted and you must restart the dual authorization process to delete the key . All key operations will still be allowed on the key. The key and its associated data will continue to be accessible and will not be moved to the Destroyed state. No further action can be taken to delete the key until the first user authorizes deletion again.\n|user|: In case, the server expired, Could I remove the entry from the resource list?\n|assistant|: In case  the server expire, you indeed can remove  the entry from the resource list and also  wait for the target time to trigger deletion for you, or even manually trigger the deletion from the resource reclamations.If an expired server is restored, only the entry within the resource list is restored, not the server itself.Restoring servers that belong to paid plans\nServers that belong to a paid plans do not expire, and that's why they can be restored during the reclamation period. If a server is restored, the timeframe for which the server was within the resource reclamations is billed to your account. After the server is deleted, only metadata, which isn't considered to be personal data is kept for 6 months. Make sure you back up important data for future use because you can't recover data after the virtual server has been deleted.\n\n\n|user|: Why could not I delete keys?\n|assistant|: One of the reason you could not delete a key it is when you are using the the Hyper Protect Crypto Services user interface. The service was not able to delete key \"<key_name>\". Because the key is enabled with the dual authorization policy and you set the key for deletion, a second approver needs to continue with the key deletion operation. Note that you will not be able to delete the key if it is protecting a registered IBM Cloud resource that's non-erasable due to a retention policy.\n\n\n|user|: What could happen if I force a deletion on a key?"
              }
            }
          }
        }
      }
    },
    {
      "document_id": "ibmcld_07578-1209748-1211682",
      "text": "\nDeleting a key moves it into a Destroyed state, a \"soft\" deletion in which the key can still be seen and restored for 30 days. After 90 days, the key will be automatically purged, or \"hard deleted\", and its associated data will be permanently shredded and removed from the Key Protect service. If it is desirable that a key be purged sooner than 90 days, it is also possible to hard delete a key four hours after it has been moved into the Destroyed state.\n\nAfter a key has been deleted, any data that is encrypted by the key becomes inaccessible, though this can be reversed if the key is restored within the 30-day time frame. After 30 days, key metadata, registrations, and policies are available for up to 90 days, at which point the key becomes eligible to be purged. Note that once a key is no longer restorable and has been purged, its associated data can no longer be accessed. As a result, [destroying resources](https://cloud.ibm.com/docs/key-protect?topic=key-protect-security-and-compliancedata-deletion) is not recommended for production environments unless absolutely necessary.\n* What happens if I try to delete a key that's actively encrypting data?\n\nFor your protection, Key Protect prevents the deletion of a key that's actively encrypting data in the cloud. If you try to delete a key that's registered with a cloud resource, the action won't succeed.\n\nIf needed, you can [force deletion on a key](https://cloud.ibm.com/docs/key-protect?topic=key-protect-delete-keysdelete-keys-force-delete) by using the Key Protect APIs. [Review which resources are encrypted by the key](https://cloud.ibm.com/docs/key-protect?topic=key-protect-view-protected-resources) and verify with the owner of the resources to ensure you no longer require access to that data.\n\nIf you can't delete a key because a retention policy exists on the associated resource, contact the account owner to remove the retention policy on that resource.",
      "url": "https://cloud.ibm.com/docs/faqs",
      "score": 44.869015,
      "feedback": {
        "relevant": {
          "868c6e58-57c1-48ee-8c67-832dbedcac18": {
            "value": "no",
            "timestamp": 1723462762
          }
        }
      },
      "query": {
        "bool": {
          "must": {
            "text_expansion": {
              "ml.tokens": {
                "model_id": ".elser_model_1",
                "model_text": "|user|: How can I delete a key?\n|assistant|: To delete a key using IBM Key Protect, you can follow these steps:\n1. Log in to the IBM Cloud console.\n2. Go to Menu > Resource List to view a list of your resources.\n3. From your IBM Cloud resource list, select your provisioned instance of Key Protect.\n4. On the application details page, use the Keys table to browse the keys in your service.\n5. Click the \u22ef icon to open a list of options for the key that you want to delete.\nPlease note that when you delete a key, it is \"soft deleted\", meaning that the key and its associated data will be restorable up to 30 days after deletion. After 90 days, the key becomes eligible to be automatically purged, or hard deleted, and its associated data will be permanently removed from the Key Protect service.\nAlso, keep in mind that deleting a key will make any data encrypted by the key inaccessible. If the key is restored within the 30-day time frame, this can be reversed. However, after 30 days, key metadata, registrations, and policies are available for up to 90 days, at which point the key becomes eligible to be purged. Once a key is no longer restorable and has been purged, its associated data can no longer be accessed.\n|user|: what happen when the first user authorizes a key for deletion?\n|assistant|: When the first user authorizes a key for deletion, it remains in the Active state for seven days. During this time, all key operations are allowed on the key. To complete the deletion, another user with a Manager role can use the Key Protect GUI or API to delete the key at any point during those seven days. Once the key is deleted, it will be moved to the Destroyed state. However, because it is impossible to purge an active key, another user must delete the key before it can be purged.\nThe key and its associated data will be inaccessible 90 days after being deleted. When you delete a key, it is \"soft deleted\", meaning that the key and its associated data will be restorable up to 30 days after deletion. You are able to still retrieve associated data such as key metadata, registrations, and policies for up to 90 days. After 90 days, the key becomes eligible to be automatically purged, or hard deleted, and its associated data will be permanently removed from the Key Protect service.\n|user|: What could happen if no action is taken by the second user and the 7-day period experies?\n|assistant|: If no action is taken by the second user and the 7-day period expires, the key will remain in the Active state and will not be deleted and you must restart the dual authorization process to delete the key . All key operations will still be allowed on the key. The key and its associated data will continue to be accessible and will not be moved to the Destroyed state. No further action can be taken to delete the key until the first user authorizes deletion again.\n|user|: In case, the server expired, Could I remove the entry from the resource list?\n|assistant|: In case  the server expire, you indeed can remove  the entry from the resource list and also  wait for the target time to trigger deletion for you, or even manually trigger the deletion from the resource reclamations.If an expired server is restored, only the entry within the resource list is restored, not the server itself.Restoring servers that belong to paid plans\nServers that belong to a paid plans do not expire, and that's why they can be restored during the reclamation period. If a server is restored, the timeframe for which the server was within the resource reclamations is billed to your account. After the server is deleted, only metadata, which isn't considered to be personal data is kept for 6 months. Make sure you back up important data for future use because you can't recover data after the virtual server has been deleted.\n\n\n|user|: Why could not I delete keys?\n|assistant|: One of the reason you could not delete a key it is when you are using the the Hyper Protect Crypto Services user interface. The service was not able to delete key \"<key_name>\". Because the key is enabled with the dual authorization policy and you set the key for deletion, a second approver needs to continue with the key deletion operation. Note that you will not be able to delete the key if it is protecting a registered IBM Cloud resource that's non-erasable due to a retention policy.\n\n\n|user|: What could happen if I force a deletion on a key?"
              }
            }
          }
        }
      }
    },
    {
      "document_id": "ibmcld_16727-1212381-1214315",
      "text": "\nDeleting a key moves it into a Destroyed state, a \"soft\" deletion in which the key can still be seen and restored for 30 days. After 90 days, the key will be automatically purged, or \"hard deleted\", and its associated data will be permanently shredded and removed from the Key Protect service. If it is desirable that a key be purged sooner than 90 days, it is also possible to hard delete a key four hours after it has been moved into the Destroyed state.\n\nAfter a key has been deleted, any data that is encrypted by the key becomes inaccessible, though this can be reversed if the key is restored within the 30-day time frame. After 30 days, key metadata, registrations, and policies are available for up to 90 days, at which point the key becomes eligible to be purged. Note that once a key is no longer restorable and has been purged, its associated data can no longer be accessed. As a result, [destroying resources](https://cloud.ibm.com/docs/key-protect?topic=key-protect-security-and-compliancedata-deletion) is not recommended for production environments unless absolutely necessary.\n* What happens if I try to delete a key that's actively encrypting data?\n\nFor your protection, Key Protect prevents the deletion of a key that's actively encrypting data in the cloud. If you try to delete a key that's registered with a cloud resource, the action won't succeed.\n\nIf needed, you can [force deletion on a key](https://cloud.ibm.com/docs/key-protect?topic=key-protect-delete-keysdelete-keys-force-delete) by using the Key Protect APIs. [Review which resources are encrypted by the key](https://cloud.ibm.com/docs/key-protect?topic=key-protect-view-protected-resources) and verify with the owner of the resources to ensure you no longer require access to that data.\n\nIf you can't delete a key because a retention policy exists on the associated resource, contact the account owner to remove the retention policy on that resource.",
      "url": "https://cloud.ibm.com/docs?tab=faqs",
      "score": 44.869015,
      "feedback": {
        "relevant": {
          "868c6e58-57c1-48ee-8c67-832dbedcac18": {
            "value": "no",
            "timestamp": 1723462757
          }
        }
      },
      "query": {
        "bool": {
          "must": {
            "text_expansion": {
              "ml.tokens": {
                "model_id": ".elser_model_1",
                "model_text": "|user|: How can I delete a key?\n|assistant|: To delete a key using IBM Key Protect, you can follow these steps:\n1. Log in to the IBM Cloud console.\n2. Go to Menu > Resource List to view a list of your resources.\n3. From your IBM Cloud resource list, select your provisioned instance of Key Protect.\n4. On the application details page, use the Keys table to browse the keys in your service.\n5. Click the \u22ef icon to open a list of options for the key that you want to delete.\nPlease note that when you delete a key, it is \"soft deleted\", meaning that the key and its associated data will be restorable up to 30 days after deletion. After 90 days, the key becomes eligible to be automatically purged, or hard deleted, and its associated data will be permanently removed from the Key Protect service.\nAlso, keep in mind that deleting a key will make any data encrypted by the key inaccessible. If the key is restored within the 30-day time frame, this can be reversed. However, after 30 days, key metadata, registrations, and policies are available for up to 90 days, at which point the key becomes eligible to be purged. Once a key is no longer restorable and has been purged, its associated data can no longer be accessed.\n|user|: what happen when the first user authorizes a key for deletion?\n|assistant|: When the first user authorizes a key for deletion, it remains in the Active state for seven days. During this time, all key operations are allowed on the key. To complete the deletion, another user with a Manager role can use the Key Protect GUI or API to delete the key at any point during those seven days. Once the key is deleted, it will be moved to the Destroyed state. However, because it is impossible to purge an active key, another user must delete the key before it can be purged.\nThe key and its associated data will be inaccessible 90 days after being deleted. When you delete a key, it is \"soft deleted\", meaning that the key and its associated data will be restorable up to 30 days after deletion. You are able to still retrieve associated data such as key metadata, registrations, and policies for up to 90 days. After 90 days, the key becomes eligible to be automatically purged, or hard deleted, and its associated data will be permanently removed from the Key Protect service.\n|user|: What could happen if no action is taken by the second user and the 7-day period experies?\n|assistant|: If no action is taken by the second user and the 7-day period expires, the key will remain in the Active state and will not be deleted and you must restart the dual authorization process to delete the key . All key operations will still be allowed on the key. The key and its associated data will continue to be accessible and will not be moved to the Destroyed state. No further action can be taken to delete the key until the first user authorizes deletion again.\n|user|: In case, the server expired, Could I remove the entry from the resource list?\n|assistant|: In case  the server expire, you indeed can remove  the entry from the resource list and also  wait for the target time to trigger deletion for you, or even manually trigger the deletion from the resource reclamations.If an expired server is restored, only the entry within the resource list is restored, not the server itself.Restoring servers that belong to paid plans\nServers that belong to a paid plans do not expire, and that's why they can be restored during the reclamation period. If a server is restored, the timeframe for which the server was within the resource reclamations is billed to your account. After the server is deleted, only metadata, which isn't considered to be personal data is kept for 6 months. Make sure you back up important data for future use because you can't recover data after the virtual server has been deleted.\n\n\n|user|: Why could not I delete keys?\n|assistant|: One of the reason you could not delete a key it is when you are using the the Hyper Protect Crypto Services user interface. The service was not able to delete key \"<key_name>\". Because the key is enabled with the dual authorization policy and you set the key for deletion, a second approver needs to continue with the key deletion operation. Note that you will not be able to delete the key if it is protecting a registered IBM Cloud resource that's non-erasable due to a retention policy.\n\n\n|user|: What could happen if I force a deletion on a key?"
              }
            }
          }
        }
      }
    },
    {
      "document_id": "ibmcld_09064-9212-10938",
      "text": "\nForce deletion on a key won't succeed if the key is protecting a registered IBM Cloud resource that's non-erasable due to a [retention policy](https://cloud.ibm.com/docs/cloud-object-storage?topic=cloud-object-storage-immutableimmutable-terminology-policy), which is a Write Once Read Many (WORM) policy set on the your IBM Cloud resource. You can verify whether a key is associated with a non-erasable resource by checking the 'preventKeyDeletion\" field in the [registration details](https://cloud.ibm.com/docs/key-protect?topic=key-protect-view-protected-resources) for the key. Then, you must contact an account owner to remove the retention policy on each registered IBM Cloud resource that is associated with the key before you can delete the key.\n\n\n\n1. [Retrieve your authentication credentials to work with keys in the service](https://cloud.ibm.com/docs/key-protect?topic=key-protect-set-up-api).\n2. Retrieve the ID of the key that you want to force delete.\n\nYou can retrieve the ID for a specified key by making a GET /v2/keys/ request, or by viewing your keys in the Key Protect dashboard.\n3. Run the following curl command to force delete the key and its contents.\n\n$ curl -X DELETE \"https://<region>.kms.cloud.ibm.com/api/v2/keys/<keyID_or_alias>?force=true\" -H \"authorization: Bearer <IAM_token>\" -H \"bluemix-instance: <instance_ID>\" -H \"prefer: <return_preference>\"\n\nReplace the variables in the example request according to the following table.\n\n\n\n\n\nTable 2. Describes the variables that are needed to delete keys with the Key Protect API.\n\n Variable Description \n\n region Required. The region abbreviation, such as us-south or eu-gb, that represents the geographic area where your Key Protect instance resides.",
      "url": "https://cloud.ibm.com/docs/key-protect?topic=key-protect-delete-keys",
      "score": 19.684399,
      "feedback": {
        "relevant": {
          "868c6e58-57c1-48ee-8c67-832dbedcac18": {
            "value": "yes",
            "timestamp": 1723462702
          }
        }
      },
      "query": {
        "bool": {
          "must": {
            "text_expansion": {
              "ml.tokens": {
                "model_id": ".elser_model_1",
                "model_text": "What could happen if I force a deletion on a key?"
              }
            }
          }
        }
      }
    },
    {
      "document_id": "ibmcld_09087-30097-31549",
      "text": "\nYou must use the force option to delete a root key that is registered with another cloud resource.\n\nRegistrations are associations between root keys and other cloud resources, such as Cloud Object Storage (COS) buckets or Cloud Databases deployments.\n\nFor more information about Registrations, see [viewing associations between root keys and encrypted IBM Cloud resources](https://cloud.ibm.com/docs/key-protect?topic=key-protect-view-protected-resources).\n\n[See this explanation](https://cloud.ibm.com/docs/key-protect?topic=key-protect-key-protect-cli-referencekp-key-delete) of deleting keys that are registered with another cloud resource (look at the force option).\n\n this CLI request fails because the registration was not deleted\n$ ibmcloud kp key delete $KEY_ID -i $KP_INSTANCE_ID\n\nDeleting key: 52a9d772-8982-4620-bfb4-b070dd812a0c, from instance: b0d84b32-09d0-4314-8049-da78e3b9ab6f...\nFAILED\nkp.Error:\ncorrelation_id='c27b7948-4a1f-4cbd-8770-cb3616888e27',\nmsg='Conflict:\nKey could not be deleted.\nPlease see \"reasons\" for more details.',\nreasons='[PROTECTED_RESOURCE_ERR:\nKey is protecting one or more cloud resources -\nFOR_MORE_INFO_REFER: https://cloud.ibm.com/docs/key-protect?topic=key-protect-troubleshootingunable-to-delete-keys]'\n\n this CLI request succeeds when using the --force option\n the registration between Key Protect and the cloud resource exists\n$ ibmcloud kp key delete $KEY_ID -i $KP_INSTANCE_ID --force --output json\n\n{",
      "url": "https://cloud.ibm.com/docs/key-protect?topic=key-protect-error-messages",
      "score": 18.677977,
      "feedback": {
        "relevant": {
          "868c6e58-57c1-48ee-8c67-832dbedcac18": {
            "value": "yes",
            "timestamp": 1723462770
          }
        }
      },
      "query": {
        "bool": {
          "must": {
            "text_expansion": {
              "ml.tokens": {
                "model_id": ".elser_model_1",
                "model_text": "What could happen if I force a deletion on a key?"
              }
            }
          }
        }
      }
    }
  ],
  "timestamp": 1723462186
}